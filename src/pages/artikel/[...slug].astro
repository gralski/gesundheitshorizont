---
import { getCollection, render } from 'astro:content';
import ArticleLayout from '../../layouts/ArticleLayout.astro';
import AdvertorialLayout from '../../layouts/AdvertorialLayout.astro';
import AdvertorialFullLayout from '../../layouts/AdvertorialFullLayout.astro';

export async function getStaticPaths() {
  const articles = await getCollection('artikel');
  return articles.map((article) => ({
    params: { slug: article.id },
    props: { article },
  }));
}

const { article } = Astro.props;
const { Content } = await render(article);
const { data } = article;

const layoutType = data.layout || 'article';
---

{layoutType === 'advertorial-full' ? (
  <AdvertorialFullLayout
    title={data.title}
    titleHighlight={data.titleHighlight}
    description={data.description}
    pubDate={data.pubDate}
    heroImage={data.heroImage}
    author={data.author}
    authorRole={data.authorRole}
    authorAvatar={data.authorAvatar}
    readingTime={data.readingTime}
    rating={data.rating}
    ratingCount={data.ratingCount}
    tags={data.tags}
    ctaText={data.ctaText}
    ctaUrl={data.ctaUrl}
  >
    <Content />
  </AdvertorialFullLayout>
) : layoutType === 'advertorial' ? (
  <AdvertorialLayout
    title={data.title}
    titleHighlight={data.titleHighlight}
    description={data.description}
    pubDate={data.pubDate}
    heroImage={data.heroImage}
    author={data.author}
    authorRole={data.authorRole}
    authorAvatar={data.authorAvatar}
    readingTime={data.readingTime}
    rating={data.rating}
    ratingCount={data.ratingCount}
    tags={data.tags}
    ctaText={data.ctaText}
    ctaUrl={data.ctaUrl}
    sidebarTitle={data.sidebarTitle}
    sidebarDescription={data.sidebarDescription}
    sidebarCta={data.sidebarCta}
    sidebarCtaUrl={data.sidebarCtaUrl}
    sidebarImage={data.sidebarImage}
  >
    <Content />
  </AdvertorialLayout>
) : (
  <ArticleLayout
    title={data.title}
    description={data.description}
    pubDate={data.pubDate}
    updatedDate={data.updatedDate}
    heroImage={data.heroImage}
    category={data.category}
    categories={data.categories}
    author={data.author}
    authorRole={data.authorRole}
    authorAvatar={data.authorAvatar}
    reviewedBy={data.reviewedBy}
    readingTime={data.readingTime}
    sidebarTitle={data.sidebarTitle}
    sidebarDescription={data.sidebarDescription}
    sidebarCta={data.sidebarCta}
    sidebarCtaUrl={data.sidebarCtaUrl}
    sidebarImage={data.sidebarImage}
  >
    <Content />
  </ArticleLayout>
)}
